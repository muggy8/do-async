!function(a){var b=Array.prototype.forEach,c=Array.prototype.slice;a.doAsync=function(a,d){var e,f;if("string"==typeof a)f=a,e=d;else{if("function"!=typeof a)throw"type missmatch";e=a}var g={length:0};g.d=function(a,d){var e=g.length;g.length+=1;var f=g[e]={a:a,b:{},c:[]};d&&(g[d]=f),f.b.pass=function(){var a=c.call(arguments);f.b.jump(1).apply(f.b,a)},f.b.end=f.b.destroy=function(){b.call(g,function(a){a.a=function(){},a.b={},a.c=[]}),h.then=function(){}},f.b.jumpTo=f.b.jumpto=function(a){return function(){var b=c.call(arguments);g[a]?g[a].a.apply(g[a].b,b):f.c.push({targetLink:a,args:b})}},f.b.jump=function(a){var b=e+a;return f.b.jumpTo(b)},f.b.self=function(){var a=c.call(arguments);f.b.jump(0).apply(f.b,a)}};var h=function(){var a=c.call(arguments);g[0].a.apply(g[0].b,a)};return h.then=function(a,c){var d,e;if("string"==typeof a||void 0===a)e=a,d=c;else{if("function"!=typeof a)throw"type missmatch";d=a}g.d(d,e);var f=g.length-1;return f>0&&b.call(g,function(a){a.c.forEach(function(a){a.targetLink!=f&&a.targetLink!=e||g[f-1].b.pass.apply(void 0,a.args)})}),h},h.then(f,e),e.length||h(),h},"undefined"!=typeof module&&module.exports&&(module.exports=a.doAsync)}(this);